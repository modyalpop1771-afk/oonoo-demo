<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>طلب نقاط + لعبة كراش</title>
  <style>
    body { font-family: Arial; background:#111; color:#fff; text-align:center; }
    h1,h2 { color: #0f0; }
    .box { background:#222; padding:20px; margin:20px auto; border-radius:10px; width:90%; max-width:400px; }
    input, button { padding:10px; margin:5px; width:90%; border:none; border-radius:5px; }
    button { cursor:pointer; background:#0f0; color:#000; font-weight:bold; }
    #crashBox { margin-top:30px; }
  </style>
</head>
<body>
  <h1>مرحبا بك 👋</h1>

  <!-- صندوق طلب النقاط -->
  <div class="box">
    <h2>طلب نقاط من الإدارة</h2>
    <input type="text" id="username" placeholder="اكتب اسم المستخدم">
    <input type="text" id="phone" placeholder="رقم الهاتف">
    <input type="number" id="points" placeholder="عدد النقاط المطلوبة">
    <input type="file" id="screenshot">
    <button onclick="sendRequest()">إرسال الطلب</button>
  </div>

  <!-- لعبة الكراش -->
  <div class="box" id="crashBox">
    <h2>🎮 لعبة كراش</h2>
    <p>راهن بالنقاط وشوف هل هتكسب (نسبة الفوز 10% فقط)</p>
    <input type="number" id="bet" placeholder="عدد النقاط للمراهنة">
    <button onclick="playCrash()">إلعب</button>
    <p id="crashResult"></p>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>

  <script>
    // 🔑 بيانات مشروع Firebase بتاعتك (غيرها باللي عندك)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // --- نظام الطلبات ---
    function sendRequest(){
      let user = document.getElementById("username").value;
      let phone = document.getElementById("phone").value;
      let points = document.getElementById("points").value;
      let file = document.getElementById("screenshot").files[0];

      if(user.trim()=="" || phone.trim()=="" || points <= 0){
        alert("من فضلك اكتب كل البيانات المطلوبة");
        return;
      }

      db.collection("requests").add({
        user: user,
        phone: phone,
        points: points,
        screenshot: file ? file.name : "بدون صورة",
        status: "pending",
        created: new Date()
      }).then(()=>{
        alert("✅ تم إرسال طلبك وسيتم مراجعته");
      });
    }

    // --- لعبة الكراش ---
    function playCrash(){
      let bet = parseInt(document.getElementById("bet").value);
      if(bet <= 0 || isNaN(bet)){
        alert("اكتب عدد صحيح من النقاط للمراهنة");
        return;
      }

      // تحديد الفوز أو الخسارة (10% مكسب فقط)
      let win = Math.random() < 0.1; // 10% فقط
      let result = document.getElementById("crashResult");

      if(win){
        let profit = bet * 2; // يكسب ضعف
        result.innerHTML = "🎉 مبروك! كسبت " + profit + " نقطة";
      } else {
        result.innerHTML = "❌ خسرت " + bet + " نقطة";
      }
    }
  </script>
</body>
</html>
